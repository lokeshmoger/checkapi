<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="DoForMe api test : mini-framework to test API calls and their responses" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>DoForMe api test</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/renatoac/DoForMeApiTest">View on GitHub</a>

          <h1 id="project_title">DoForMe api test</h1>
          <h2 id="project_tagline">mini-framework to test API calls and their responses</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/renatoac/DoForMeApiTest/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/renatoac/DoForMeApiTest/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>That mini-framework generate dynamics scenarios based upon on a config file in addition to test API calls and their responses.   </p>

<p>It is written in javascript and it uses Vows (to API tests, whereas it allows to create dynamic contexts - test cases) and Mocha (to helpers tests).</p>

<h2>Prerequisites</h2>

<p><strong>Step 1:</strong> Install node and npm. </p>

<p><strong>Step 2:</strong> Install all dependencies for the project.</p>

<pre><code>npm install
</code></pre>

<p><strong>Step 3:</strong> Install mocha for run tests of helpers.</p>

<pre><code>npm install -g mocha
</code></pre>

<p><strong>Step 4:</strong> Install vows for run dynamic tests of API.</p>

<pre><code>npm install -g vows
</code></pre>

<h2>Steps to run all tests of the helpers</h2>

<p>Run the following command: </p>

<pre><code>make test-others
</code></pre>

<h2>Steps to run the API tests</h2>

<p>Run the following command: </p>

<pre><code>make test-api
</code></pre>

<h2>How to configure</h2>

<p>Modify the file configApiExample.json (rename it for better readability) with the config of your api.</p>

<p>Open the file <strong>/test/configApiExample.json</strong> in order to follow the information below.</p>

<h3>API config</h3>

<p>Data related to api and debug.</p>

<h3>AUTH config</h3>

<p>Data required to OAuth or Basic authentication. Wheter Basic so you can leave unnecessary fields blank.</p>

<h3>RESOURCES config</h3>

<p>Data for resources of your API.</p>

<h4>Details</h4>

<p><strong>"name"</strong>: some alias to resource.<br><strong>"url"</strong>: relative url to specific resource. Example: "/search". In url is possible has placeholder to some dynamic part. Example: "/places/{placeId}/reviews/new". Note that "placeId" is embraced by brackets {}. It tell to system generate a dynamic value based on "placeId" param.<br><strong>"auth"</strong>: type of authentication. Can be "oauth" or "basic".<br><strong>"methodHttp"</strong>: the name say all. Can be "put", "post", "get" or "delete".  </p>

<h5>params config</h5>

<p><strong>"params"</strong>: all data relative to params of that resource (or some dynamic value in URL).<br><strong>"name"</strong>: param name.<br><strong>"scenario"</strong>: an array of mappings containing "value" and "statusHttp". All those values will be tested on.<br>
In a nutshell, the system will get a "value" from a scenario and will mix with all others needed params for that resource with POSITIVE (status http = 200) values. It ensures that wheter ypou are generating a negative scenario (e.g. status http = 400) so only current value is negative and others positive to test one negative thing by time. So, "statusHttp" make sense now, since expected result is relative to that specific value of the param, when it is sent with all others valid params.  </p>

<p>Example: </p>

<pre><code>    "params": [
        "name": "rating",
        "scenario": [
                {"value": "1", "statusHttp": "200"},
                {"value": "2", "statusHttp": "200"},
                {"value": "3", "statusHttp": "200"},
                {"value": "4", "statusHttp": "200"},
                {"value": "5", "statusHttp": "200"},
                {"value": "0", "statusHttp": "400"},
                {"value": "6", "statusHttp": "400"},
                {"value": "a", "statusHttp": "400"},
                {"value": "Ã©", "statusHttp": "400"}
         ]
    ]
</code></pre>

<p>Params required by multiple resources can just referenced in params without "scenario".<br>
It will tell to system to use this param and get scenarios from "paramsDefault" (see below).  </p>

<p>Example:</p>

<pre><code>    "params": [
        "name": "type"
    ]
</code></pre>

<h5>paramsDefault config</h5>

<p>Put here all params (or dynamic value to urls) that you want to use with multiple resources so you don't need to repeat yourself.  </p>

<pre><code>"paramsDefault":
    [
        {
            "name": "type",
            "scenario": [
                    {"value": "json", "statusHttp": "200"},
                    {"value": "xml", "statusHttp": "200"},
                    {"value": "a","statusHttp": "400"}
            ]
        }
    ]
</code></pre>

<h3>Dynamic values for scenario</h3>

<p>Imagine that you need to test a resource that have a constraint to unique values. You can do it in the following way:
Inside "value" of a scenario, type the char <strong><em>$</em></strong> followed by a valid function name.</p>

<p>Example: </p>

<pre><code> {
    "name": "content",
    "scenario": [
        { "value": "$randomText(20)", "statusHttp": "200" }
    ]
}
</code></pre>

<p>Note the value <strong><em>$randomText(20)</em></strong>. Now, you can ask: <strong><em>WHERE is that function?</em></strong>
The system will search that function in "/lib/helper/config.js" file. That function is there just for the sake of example.
That file should contain all your helper functions that you wants to generate dynamic values in config file.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">DoForMe api test maintained by <a href="https://github.com/renatoac">renatoac</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
